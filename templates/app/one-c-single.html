{% extends 'base.html' %}

{% load staticfiles product_template_helper %}

{% block title %}{{ one_c_object.title }}{% endblock %}

{% block extra_css %}
	<link rel="stylesheet" type="text/css" href="{% static 'slick/slick.css' %}"/>
	<link rel="stylesheet" type="text/css" href="{% static 'slick/slick-theme.css' %}"/>
	<link rel="stylesheet" href="{% static 'css/lightgallery.min.css' %}">
	<style>
		.price-box {
			margin-top: 40px;
		}

		.price-box ul {
			margin: 0;
			padding: 0;
		}

		.price-box ul li {
			display: block;
			padding: 5px 10px;
			-webkit-border-radius: 4px;
			-moz-border-radius: 4px;
			border-radius: 4px;
			border: 1px solid #f7c605;
			cursor: pointer;
			color: #111;
			background: transparent;
			margin-bottom: 10px;

			-webkit-transition: background-color 0.5s, color 0.5s;
			-moz-transition: background-color 0.5s, color 0.5s;
			-ms-transition: background-color 0.5s, color 0.5s;
			-o-transition: background-color 0.5s, color 0.5s;
			transition: background-color 0.5s, color 0.5s;
		}

		.price-box ul li:hover,
		.price-box ul li.active{
			background: #f7c605;
		}

		.main-img-slider {
			width: 100%;
			height: auto;
			position: relative;
			cursor: pointer;
		}

		.main-img-slider figure {
			width: 100%;
			height: auto;
		}

		.main-img-slider figure img {
			width: 100%;
		}
	</style>
{% endblock %}

{% block content %}

	<!-- Shop Single START -->
	<div class="section-block">
		<div class="container">
			<div class="row">
				<div class="col-md-6 col-sm-6 col-12">
					<!-- Product Images & Alternates -->
					<div class="product-images">
						<!-- Begin Product Images Slider -->
						<div id="slick-target">
							<div class="main-img-slider" data-src="{{ one_c_object.thumbnail.url }}">
								<figure>
									<img src="{{ one_c_object.thumbnail.url }}" alt="{{ one_c_object.title }}" />
								</figure>
							</div>
							{% for slide in one_c_object.onecimage_set.all %}
								<div class="main-img-slider" data-src="{{ slide.image.url }}">
									<figure>
										<img src="{{ slide.image.url }}" alt="{{ slide.image.name }}" />
									</figure>
								</div>
							{% endfor %}
						</div>

						<!-- End Product Images Slider -->
					</div>
				</div>
				<div class="col-md-6 col-sm-6 col-12">
					<div class="single-product">
						<h2>{{ one_c_object.title }}</h2>

						<!-- Price Start -->
						<div class="single-product-price">
							<h4 id="price-tag">{{ one_c_object.price_box|parse_json|get_first_item:'value' }}</h4>
						</div>
						<!-- Price End -->

						<div class="price-box">
							<ul id="price-box">
								{% for item in one_c_object.price_box|parse_json %}
									<li{% if forloop.counter0 == 0 %} class="active"{% endif %} data-value="{{ item.value }}" data-id="{{ item.id }}">{{ item.key }}</li>
								{% endfor %}
							</ul>
						</div>

						{{ one_c_object.short_description|split_lines|safe }}

						<div class="product-share mt-20">
							<span>Поделиться: </span>
							{% for item in one_c_object.share_links.all %}
								<a href="{% normalize_social_link item.url request title=one_c_object.title description=one_c_object.short_description image=one_c_object.thumbnail %}" target="_blank"><i class="fa fa-{{ item.icon }}"></i></a>
							{% endfor %}
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="container mt-50">
			<div class="section-heading ">
				<div class="section-heading-line"></div>
				{{ one_c_object.full_description|split_lines|safe }}
			</div>
		</div>
	</div>
	<!-- Shop Single END -->



{% endblock %}


{% block extra_js %}
	<script src="{% static 'js/lightgallery.min.js' %}"></script>
	<script src="{% static 'slick/slick.min.js' %}"></script>
	<script src="{% static 'js/price-box.js' %}"></script>
	<script>
		$(document).ready(() => {
			let priceBox = new PriceBox();
			priceBox.init();


			let slickGallerySlider = $('#slick-target');

			slickGallerySlider.slick({
				dots: true,
				arrows: true,
				autoplay: true,
				adaptiveHeight: true,
				infinite: true
			});

			slickGallerySlider.lightGallery({
				selector: '.main-img-slider'
			});
		});
	</script>
{% endblock %}